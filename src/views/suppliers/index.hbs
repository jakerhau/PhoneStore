<div class="flex flex-col gap-4 h-full">
  <div class='flex items-center gap-1.5'>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor" class="w-5 h-5">
        <path d="M160 80c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 352c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-352zM0 272c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 160c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48L0 272zM368 96l32 0c26.5 0 48 21.5 48 48l0 288c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48z"></path>
    </svg>
    <span class='font-semibold text-lg'>Quản lý nhà cung cấp</span>
  </div>

{{!-- Seach tên số điện thoại email and button add --}}
<div class="flex flex-col gap-5 h-full p-5 bg-white rounded-sm border border-neutral-5 shadow">

<div class="flex justify-between items-end pb-5 border-b border-neutral-5">
  <form id="filterForm" method="get" action="/admin/suppliers" class="flex gap-2.5 items-end">
    <div class="flex flex-col gap-1.5">
      <label for="name">Tìm kiếm theo tên</label>
      <input type="text" name="name" id="name" class="base-input-sm" value="{{name}}">
    </div>
    <div class="flex flex-col gap-1.5">
      <label for="phone">Số điện thoại</label>
      <input type="text" name="phone" id="phone" class="base-input-sm" value="{{phone}}">
    </div>
    <div class="flex flex-col gap-1.5">
      <label for="email">Email</label>
      <input type="text" name="email" id="email" class="base-input-sm" value="{{email}}">
    </div>
    <button class="button-secondary-solid-md" type="submit">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5">
            <g clip-path="url(#clip0_4223_152)">
              <path d="M11.909 10.9925L14.685 13.7679L13.7679 14.685L10.9925 11.909C9.95987 12.7368 8.67541 13.1871 7.35189 13.1852C4.13189 13.1852 1.51855 10.5719 1.51855 7.35186C1.51855 4.13186 4.13189 1.51852 7.35189 1.51852C10.5719 1.51852 13.1852 4.13186 13.1852 7.35186C13.1871 8.67538 12.7368 9.95984 11.909 10.9925ZM10.6088 10.5116C11.4314 9.66567 11.8908 8.53177 11.8889 7.35186C11.8889 4.84482 9.85828 2.81482 7.35189 2.81482C4.84485 2.81482 2.81485 4.84482 2.81485 7.35186C2.81485 9.85825 4.84485 11.8889 7.35189 11.8889C8.5318 11.8908 9.6657 11.4314 10.5116 10.6088L10.6088 10.5116Z" fill="white" />
            </g>
            <defs>
              <clipPath id="clip0_4223_152">
                <rect width="15.5556" height="15.5556" fill="white" transform="translate(0.222168 0.222229)" />
              </clipPath>
            </defs>
          </svg>
          <span>Tìm kiếm</span>
    </button>
  </form>
  <a href="/admin/suppliers/add" class="button-primary-solid-md ml-auto">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5">
          <g clip-path="url(#clip0_4225_4719)">
            <path
              d="M7.35186 7.35186V4.75926H8.64815V7.35186H11.2407V8.64815H8.64815V11.2407H7.35186V8.64815H4.75926V7.35186H7.35186ZM8.00001 14.4815C4.42028 14.4815 1.51852 11.5797 1.51852 8.00001C1.51852 4.42028 4.42028 1.51852 8.00001 1.51852C11.5797 1.51852 14.4815 4.42028 14.4815 8.00001C14.4815 11.5797 11.5797 14.4815 8.00001 14.4815ZM8.00001 13.1852C9.3752 13.1852 10.6941 12.6389 11.6665 11.6665C12.6389 10.6941 13.1852 9.3752 13.1852 8.00001C13.1852 6.62481 12.6389 5.30594 11.6665 4.33353C10.6941 3.36112 9.3752 2.81482 8.00001 2.81482C6.62481 2.81482 5.30594 3.36112 4.33353 4.33353C3.36112 5.30594 2.81482 6.62481 2.81482 8.00001C2.81482 9.3752 3.36112 10.6941 4.33353 11.6665C5.30594 12.6389 6.62481 13.1852 8.00001 13.1852Z"
              fill="white" />
          </g>
          <defs>
            <clipPath id="clip0_4225_4719">
              <rect width="15.5556" height="15.5556" fill="white" transform="translate(0.222229 0.222229)" />
            </clipPath>
          </defs>
        </svg>
          <span>Thêm nhà cung cấp</span>
        </a>
</div>

{{!-- Table --}}
<div class="flex flex-col">
    <div class="grid border-b-[2px] border-neutral-5 grid-cols-[1fr_1fr_1fr_1fr_1fr]">
        <span class="p-2.5 text-neutral-7">Tên</span>
        <span class="p-2.5 text-neutral-7">Số điện thoại</span>
        <span class="p-2.5 text-neutral-7">Email</span>
        <span class="p-2.5 text-neutral-7">Trạng thái</span>
        <span class="p-2.5 text-neutral-7">Thao tác</span>
    </div>
    {{#each suppliers}}
    <div class="grid border-b-[2px] border-neutral-5 grid-cols-[1fr_1fr_1fr_1fr_1fr]">
        <span class="p-2.5 text-neutral-5">{{name}}</span>
        <span class="p-2.5 text-neutral-5">{{phone}}</span>
        <span class="p-2.5 text-neutral-5">{{email}}</span>
        <span class="p-2.5 {{#if isActive}}text-common-success{{else}}text-common-error/80{{/if}} font-semibold">
            {{#if isActive}}Hoạt động{{else}}Không hoạt động{{/if}}
        </span>
        <span class="p-2.5 text-neutral-5">
            <a href="/admin/suppliers/{{_id}}" class="button-primary-solid-sm">Xem</a>
            <a href="/admin/suppliers/delete/{{_id}}" class="button-secondary-solid-sm">Xóa</a>
        </span>
    </div>
    {{/each}}
</div>

<script>
    function deleteSupplier(id) {
        if (confirm('Bạn có chắc chắn muốn xóa nhà cung cấp này?')) {
            fetch(`/admin/suppliers/${id}`, {
                method: 'DELETE',
            })
            .then(response => response.json())
            .then(data => {
                window.location.reload();
            })
            .catch(error => {
                console.log(error);
            });
        }
    }
</script>

